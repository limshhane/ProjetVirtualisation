<html>		 	 		  	   			  
    <head>		 	 		  	   			  
       <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">		 	 		  	   			  
       <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">		 	 		  	   			  
       <link rel="stylesheet" href="https://github.com/ColorlibHQ/AdminLTE/blob/master/dist/css/adminlte.css">		 	 		  	   			  
                                                
                                                   			  
       <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>		 	 		  	   			  
       <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>		 	 		  	   			  
       <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>		 	 		  	   			  
       <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch-jsonp/1.1.1/fetch-jsonp.js"></script>		 	 		  	   			  
       <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>		 	 		  	   			  
       <title>Giphy</title>
                                                
   </head>		 	 		  	   			  
                                                
   <body>		 	 		  	   			  
                                                                             
       <div class="tab-content" id="nav-tabContent">		 	 		  	   			  
                                                                        
   <!--Giphy CONTENT -->		 	 		  	   			  
                                            
               <div class="d-flex flex-row">		 	 		  	   			  
                   <div class="p-2 col-6">		 	 		  	   			  
                       <input class="form-control" id="GiphySearchBar" type="text" placeholder="Search..." aria-label="GiphySearch">		 	 		  	   			  
                   </div>		 	 		  	   			  
                   <div class="p-2">		 	 		  	   			  
                       <button type="button" class="btn btn-dark" id="GiphySearchBtn">Search</button>		 	 		  	   			  
                   </div>		 	 		  	   			  
               </div>		 	 		  	   			  
                                                
               <div class="row">		 	 		  	   			  
                   <div class="mt-2 ml-1 col-12" id="GiphyContent">		 	 		  	   			  
                                                
                   </div>		 	 		  	   			  
               </div>		 	 		  	   			  
               <!-- Giphy pagination -->		 	 		  	   			  
               <div class="Giphy fixed-bottom row">		 	 		  	   			  
                   <div class= col-12>		 	 		  	   			  
                       <ul class="pagination justify-content-center" id="GiphyPagination" hidden>		 	 		  	   			  
                           <li class="page-item">		 	 		  	   			  
                               <a class="page-link" aria-label="Previous" id="GiphyPrevPage">		 	 		  	   			  
                                   <span aria-hidden="true">&laquo;</span>		 	 		  	   			  
                                   <span class="sr-only">Previous</span>		 	 		  	   			  
                               </a>		 	 		  	   			  
                           </li>		 	 		  	   			  
                           <li class="page-item">		 	 		  	   			  
                               <a class="page-link" id="currentGiphyPage">1</a>		 	 		  	   			  
                           </li>		 	 		  	   			  
                           <li class="page-item">		 	 		  	   			  
                               <a class="page-link" aria-label="Next" id="GiphyNextPage">		 	 		  	   			  
                                   <span aria-hidden="true">&raquo;</span>		 	 		  	   			  
                                   <span class="sr-only">Next</span>		 	 		  	   			  
                               </a>		 	 		  	   			  
                           </li>		 	 		  	   			  
                       </ul>		 	 		  	   			  
                   </div>		 	 		  	   			  
               </div>		 	 		  	   			   	 		  	   			  
                                                
   <!-- END Giphy CONTENT -->		 	 		  	   			  
                                                                                     
                                                
   <!-- Media Modal -->		 	 		  	   			  
   <div class="modal fade" id="MediaModal" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">		 	 		  	   			  
       <div class="modal-dialog modal-dialog-centered modal-lg " role="document">		 	 		  	   			  
                                                
           <!--Content-->		 	 		  	   			  
           <div class="modal-content">		 	 		  	   			  
               <div class="modal-header">		 	 		  	   			  
                   <h5 class="modal-title" style="overflow:hidden;text-overflow: ellipsis;white-space: nowrap;">Modal Title</h5>		 	 		  	   			  
               </div>		 	 		  	   			  
               <!--Body-->		 	 		  	   			  
               <div id="MediaContainer" class="modal-body mb-0 p-0">		 	 		  	   			  
                                                
               </div>		 	 		  	   			  
                                                
               <!--Footer-->		 	 		  	   			  
               <div class="modal-footer justify-content-center">		 	 		  	   			  			  
                   <button id="ModalClose" type="button" class="btn btn-outline-primary btn-rounded btn-md" data-dismiss="modal">Close</button>		 	 		  	   			  
               </div>		 	 		  	   			  
           </div>		 	 		  	   			  
           <!--/.Content-->		 	 		  	   			  
       </div>		 	 		  	   			  
   </div>		 	 		  	   			  
   <!-- end Media Modal -->			  
                                        
                                                
   <!-- Script -->		 	 		  	   			  	 	 		  	   			  
                                              
                                                
   <!-- Giphy script -->		 	 		  	   			  
   <script type="text/javascript">		 	 		  	   			  
       var cptGiphy= 0;		 	 		  	   			  
       var searchTextGiphy;		 	 		  	   			  
       var currentGiphyOffset;		 	 		  	   			  
       var currentGiphyPage;		 	 		  	   			  
       var GiphyMaxPage;		 	 		  	   			  
                                                
                                                
       function fitGiphy(){		 	 		  	   			  
           var row =0;		 	 		  	   			  
           var column = 0;		 	 		  	   			  
           var w = $(window).width();		 	 		  	   			  
           $(".GiphyImage").each(function () {		 	 		  	   			  
               $(this).width(w/5.1);		 	 		  	   			  
               $(this).height(w/5.5);		 	 		  	   			  
               $(this).css("position","absolute");		 	 		  	   			  
               $(this).css("display","flex");		 	 		  	   			  
               $(this).css("background-repeat","no-repeat");		 	 		  	   			  
               $(this).css("background-size","cover");		 	 		  	   			  
               $(this).css("left",$(this).width()*column);		 	 		  	   			  
               $(this).css("top",$(this).width()*row);		 	 		  	   			  
               //$(this).css("margin","5px");		 	 		  	   			  
               $(this).css("border-radius",'5vw');		 	 		  	   			  
                                                
               $(this).hover(function(){		 	 		  	   			  
                   $(this).css("z-index",'1000');		 	 		  	   			  
                   $(this).css("transform","scale(1.1)" );		 	 		  	   			  
                   $(this).css("box-shadow","0px 0px 10px 2px #000000");		 	 		  	   			  
                   $(this).css("transition","transform 0.5s");		 	 		  	   			  
                                                
               },function(){		 	 		  	   			  
                                                
                   $(this).css("z-index",'0');		 	 		  	   			  
                   $(this).css("transform","scale(1)" );		 	 		  	   			  
                   $(this).css("box-shadow","0px 0px 0px 0px #000000");		 	 		  	   			  
                   $(this).css("transition","transform 0.5s");		 	 		  	   			  
               });		 	 		  	   			  
               column++;		 	 		  	   			  
               if(column>4){		 	 		  	   			  
                   row++;		 	 		  	   			  
                   column=0;		 	 		  	   			  
               }		 	 		  	   			  
           });		 	 		  	   			  
       }		 	 		  	   			  
                                                
       function setImgModalGiphy(event){		 	 		  	   			  
           //console.log(src);		 	 		  	   			  
           $("#MediaContainer").empty();		 	 		  	   			  
           $(".modal-title").empty();		 	 		  	   			   	 		  	   			  
           $(".modal-title").text(event.data.mediaTitle);		 	 		  	   			  
           $("#MediaContainer").append('<div class="text-center"><img id="GiphyCurrentImg" src="" class="img-fluid rounded" alt="Responsive image"></div>');		 	 		  	   			  
           $("#GiphyCurrentImg").attr("src",event.data.mediaContent);		 	 		  	   			  
                                                
       }		 	 		  	   			  
                                                
       jQuery.ajaxSetup({async:false}); // sinon Ã§a marche po		 	 		  	   			   	 		  	   			  

       function giphyApiCall(giphyUrl){
            var dataToReturn;
            $.get(giphyUrl,function(data,status){
                console.log(" oui : " +  data)
                dataToReturn = data
            });
            return dataToReturn	
        }

       function addImageGiphy(){		 	 		  	   			  
           $("#GiphyContent").empty();		 	 		  	   			  
           var giphyUrl = "https://api.giphy.com/v1/gifs/search?api_key=nF3WXhTHQGD2wRAyfJaxBc8N5cCpr5Nj&q="+searchTextGiphy+"&limit=10&offset="+currentGiphyOffset+"&rating=g&lang=en";		 	 		  	   			  
             
           var data = giphyApiCall(giphyUrl)  			  
                                            
           GiphyMaxPage = data.pagination.total_count/10;		 	 		  	   			  
           var t =data.data.length;		 	 		  	   			  
           for (var i=0; i<t;i++){		 	 		  	   			  
               var link = data.data[i].images.original.url;		 	 		  	   			  
               if(link==null)continue;		 	 		  	   			  
               $("#GiphyContent").append("<div class='GiphyImage'> </div>");		 	 		  	   			  
               $("#GiphyContent").children().last().css("background-image","url("+link+")");		 	 		  	   			  
               $("#GiphyContent").children().last().attr("data-toggle","modal");		 	 		  	   			  
               $("#GiphyContent").children().last().attr("data-target","#MediaModal");		 	 		  	   			  
               $("#GiphyContent").children().last().click({		 	 		  	   			  
                   mediaContent:link,		 	 		  	   			  
                   mediaTitle:data.data[i].title}		 	 		  	   			  
                   ,setImgModalGiphy);		 	 		  	   			  
               cptGiphy++;		 	 		  	   			  
           }		 	 		  	   			  
                                       
           fitGiphy();		 	 		  	   			  
       }		 	 		  	   			  
                                                
       $("#GiphyNextPage").click(function(){		 	 		  	   			  
           if(currentGiphyPage>GiphyMaxPage-1){		 	 		  	   			  
               alert("No more page");		 	 		  	   			  
               return;		 	 		  	   			  
           }		 	 		  	   			  
           cptGiphy=0;		 	 		  	   			  
           currentGiphyPage++;		 	 		  	   			  
                                                
           currentGiphyOffset+=10;		 	 		  	   			  
                                                
           $("#currentGiphyPage").text(currentGiphyPage);		 	 		  	   			  
           addImageGiphy();		 	 		  	   			  
                                                
       });		 	 		  	   			  
                                                
       $("#GiphyPrevPage").click(function(){		 	 		  	   			  
           if(currentGiphyOffset<2){		 	 		  	   			  
               alert("No previous page");		 	 		  	   			  
               return;		 	 		  	   			  
           }		 	 		  	   			  
           currentGiphyPage--;		 	 		  	   			  
                                                
           currentGiphyOffset-=10;		 	 		  	   			  
           $("#currentGiphyPage").text(currentGiphyPage);		 	 		  	   			  
           addImageGiphy();		 	 		  	   			  
                                                
       });		 	 		  	   			  
                                                
       $("#GiphySearchBtn").click(function(){		 	 		  	   			  
           searchTextGiphy = $("#GiphySearchBar").val().toLowerCase();		 	 		  	   			  
           if (searchTextGiphy=="" || searchTextGiphy.replace(/\s+/g, '') =="" )return;		 	 		  	   			  
           document.getElementById("GiphyPagination").hidden=false;		 	 		  	   			  
           currentGiphyOffset = 0;		 	 		  	   			  
           cptGiphy=0;		 	 		  	   			  
           currentGiphyPage=1;		 	 		  	   			  
           $("#currentGiphyPage").text(currentGiphyPage);		 	 		  	   			  
           addImageGiphy();		 	 		  	   			  
                                                                                     
       });		 	 		  	   			  
                                                
       $(window).resize(function(){		 	 		  	   			  
           fitGiphy();		 	 		  	   			  
       });		 	 		  	   			  
   </script>		 	 		  	   			  
   <!-- end Giphy script -->		 	 		  	   			  
                                                         
                                                
   <!-- END Script -->		 	 		  	   			  
                                                
   <!-- Style -->		 	 		  	   			  
   <style type="text/css">		 	 		  	   			  
       .small-box{		 	 		  	   			  
           border-radius: 5px;		 	 		  	   			  
           padding:10px;		 	 		  	   			  
           margin-bottom: 20px;		 	 		  	   			  
           min-width: 150px		 	 		  	   			  
       }		 	 		  	   			  
                                                
       p {		 	 		  	   			  
         color:#ffffff;		 	 		  	   			  
     }		 	 		  	   			  
                                                
     .boxTitle {		 	 		  	   			  
       color:#ffffff;		 	 		  	   			  
       font-weight: 700;		 	 		  	   			  
   }		 	 		  	   			  
                                                
   .graphCard{		 	 		  	   			  
       min-width: 350px;		 	 		  	   			  
   }		 	 		  	   			  
   </style>		 	 		  	   			  
                                                
   <!-- end Style -->		 	 		  	   			  
                                                
   </body>		 	 		  	   			  
   </html>		 	 		  	   			  